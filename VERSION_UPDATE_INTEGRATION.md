# ğŸ“± ë²„ì „ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ í†µí•© ì™„ë£Œ

## âœ… í†µí•©ëœ ê¸°ëŠ¥

### 1. **MainScreen ìë™ ë²„ì „ ì²´í¬**
- MainScreen ì§„ì… ì‹œ ìë™ìœ¼ë¡œ ë²„ì „ ì²´í¬ ìˆ˜í–‰
- Firestoreì—ì„œ ìµœì‹  ë²„ì „ ì •ë³´ ì¡°íšŒ
- ì—…ë°ì´íŠ¸ í•„ìš” ì‹œ BottomSheet ìë™ í‘œì‹œ

### 2. **Firestore ë²„ì „ ì •ë³´ ì„¤ì •**
- Collection: `app_config`
- Document: `version_info`
- í˜„ì¬ ì„¤ì •ëœ ë²„ì „ ì •ë³´:
  ```json
  {
    "latest_version": "1.0.2",
    "minimum_version": "1.0.0",
    "update_message": "ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nâ€¢ ë‹¤í¬ëª¨ë“œ ì§€ì›\nâ€¢ ì„±ëŠ¥ ê°œì„ \nâ€¢ ë²„ê·¸ ìˆ˜ì •",
    "force_update": false
  }
  ```

### 3. **ì•± ë²„ì „**
- í˜„ì¬ ì•± ë²„ì „: `1.0.1` (í…ŒìŠ¤íŠ¸ìš©)
- Firestore ìµœì‹  ë²„ì „: `1.0.2`
- â†’ **ì—…ë°ì´íŠ¸ ì•ˆë‚´ê°€ í‘œì‹œë©ë‹ˆë‹¤**

## ğŸš€ ë™ì‘ íë¦„

```
1. ì•± ì‹¤í–‰
   â†“
2. ì‚¬ìš©ì ë¡œê·¸ì¸
   â†“
3. MainScreen ì§„ì…
   â†“
4. initState ì‹¤í–‰
   â†“
5. í™”ë©´ ë Œë”ë§ ì™„ë£Œ (addPostFrameCallback)
   â†“
6. _checkAppVersion() í˜¸ì¶œ
   â†“
7. VersionCheckService.checkVersion()
   â†“
8. Firestoreì—ì„œ version_info ì¡°íšŒ
   â†“
9. ë²„ì „ ë¹„êµ
   â”œâ”€ ìµœì‹  ë²„ì „: ì•„ë¬´ ë™ì‘ ì—†ìŒ
   â””â”€ ì—…ë°ì´íŠ¸ í•„ìš”: VersionUpdateBottomSheet í‘œì‹œ
      â†“
      ì‚¬ìš©ì ì„ íƒ:
      â”œâ”€ [ì—…ë°ì´íŠ¸]: Play Store ì´ë™
      â”œâ”€ [ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°]: SharedPreferences ì €ì¥ â†’ ì˜¤ëŠ˜ì€ ë” ì´ìƒ í‘œì‹œ ì•ˆ í•¨
      â””â”€ [ë‹«ê¸° X]: BottomSheet ë‹«ê¸° (ë‹¤ìŒ ì‹¤í–‰ ì‹œ ë‹¤ì‹œ í‘œì‹œ)
```

## ğŸ“Š UI ì˜ˆì‹œ

### **ì—…ë°ì´íŠ¸ ì•ˆë‚´ BottomSheet (ë¼ì´íŠ¸ ëª¨ë“œ)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ğŸ“±] ìƒˆ ë²„ì „ ì—…ë°ì´íŠ¸      [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—      â”‚
â”‚  â•‘  í˜„ì¬ ë²„ì „  â†’  ìµœì‹  ë²„ì „  â•‘      â”‚
â”‚  â•‘    1.0.1      1.0.2   â•‘      â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [i] ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! â”‚
â”‚                                 â”‚
â”‚  â€¢ ë‹¤í¬ëª¨ë“œ ì§€ì›                â”‚
â”‚  â€¢ ì„±ëŠ¥ ê°œì„                     â”‚
â”‚  â€¢ ë²„ê·¸ ìˆ˜ì •                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      [ì—…ë°ì´íŠ¸] ë²„íŠ¼            â”‚
â”‚     [ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ê°•ì œ ì—…ë°ì´íŠ¸ (force_update: true)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âš ï¸] í•„ìˆ˜ ì—…ë°ì´íŠ¸              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—      â”‚
â”‚  â•‘  í˜„ì¬ ë²„ì „  â†’  ìµœì‹  ë²„ì „  â•‘      â”‚
â”‚  â•‘    1.0.1      1.0.2   â•‘      â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [âš ï¸] í•„ìˆ˜ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤!  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     [ì§€ê¸ˆ ì—…ë°ì´íŠ¸] ë²„íŠ¼        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€» ë‹«ê¸° ë²„íŠ¼ ì—†ìŒ, ìŠ¤ì™€ì´í”„ë¡œ ë‹«ê¸° ë¶ˆê°€
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### **ì‹œë‚˜ë¦¬ì˜¤ 1: ì„ íƒì  ì—…ë°ì´íŠ¸ (í˜„ì¬ ìƒíƒœ)**

**ì¤€ë¹„:**
- í˜„ì¬ ì•± ë²„ì „: 1.0.1
- Firestore latest_version: 1.0.2
- force_update: false

**í…ŒìŠ¤íŠ¸ ìˆœì„œ:**
1. ì•± ì‹¤í–‰ â†’ ë¡œê·¸ì¸ â†’ MainScreen ì§„ì…
2. **ì—…ë°ì´íŠ¸ ì•ˆë‚´ BottomSheet ìë™ í‘œì‹œ** âœ…
3. ìš°ì¸¡ ìƒë‹¨ **ë‹«ê¸° ë²„íŠ¼(X) í™•ì¸** âœ…
4. **"ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°" ë²„íŠ¼ í™•ì¸** âœ…
5. "ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸°" í´ë¦­
6. ì•± ì¬ì‹œì‘
7. **BottomSheet í‘œì‹œ ì•ˆ ë¨ í™•ì¸** âœ…
8. ë‚ ì§œ ë³€ê²½ í›„ ì¬ì‹œì‘ ì‹œ ë‹¤ì‹œ í‘œì‹œë¨

**ì˜ˆìƒ ë¡œê·¸:**
```
ğŸ”„ [VERSION CHECK] Current: 1.0.1
ğŸ”„ [VERSION CHECK] Latest: 1.0.2
ğŸ”„ [VERSION CHECK] Update Available: true
ğŸ”„ [VERSION CHECK] Force Update: false
```

### **ì‹œë‚˜ë¦¬ì˜¤ 2: ê°•ì œ ì—…ë°ì´íŠ¸**

**Firestore ì„¤ì • ë³€ê²½:**
```python
# scripts/setup_version_info.pyì—ì„œ ìˆ˜ì •
version_data = {
    'latest_version': '1.0.2',
    'minimum_version': '1.0.2',  # â† í˜„ì¬ ë²„ì „ë³´ë‹¤ ë†’ê²Œ ì„¤ì •
    'update_message': 'ì¤‘ìš”í•œ ë³´ì•ˆ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
    'force_update': True,  # â† ê°•ì œ ì—…ë°ì´íŠ¸ í™œì„±í™”
}
```

**í…ŒìŠ¤íŠ¸ ìˆœì„œ:**
1. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰: `python3 scripts/setup_version_info.py`
2. ì•± ì¬ì‹œì‘ â†’ MainScreen ì§„ì…
3. **BottomSheet í‘œì‹œ** âœ…
4. **ë‹«ê¸° ë²„íŠ¼ ì—†ìŒ í™•ì¸** âœ…
5. **ìŠ¤ì™€ì´í”„ë¡œ ë‹«ê¸° ë¶ˆê°€ í™•ì¸** âœ…
6. **"ì§€ê¸ˆ ì—…ë°ì´íŠ¸" ë²„íŠ¼ë§Œ í‘œì‹œ** âœ…
7. "ì§€ê¸ˆ ì—…ë°ì´íŠ¸" í´ë¦­ â†’ Play Store ì´ë™ í™•ì¸

**ì˜ˆìƒ ë¡œê·¸:**
```
ğŸ”„ [VERSION CHECK] Current: 1.0.1
ğŸ”„ [VERSION CHECK] Latest: 1.0.2
ğŸ”„ [VERSION CHECK] Update Available: true
ğŸ”„ [VERSION CHECK] Force Update: true
```

### **ì‹œë‚˜ë¦¬ì˜¤ 3: ìµœì‹  ë²„ì „ (ì—…ë°ì´íŠ¸ ë¶ˆí•„ìš”)**

**pubspec.yaml ìˆ˜ì •:**
```yaml
version: 1.0.2+13  # Firestoreì™€ ë™ì¼í•œ ë²„ì „
```

**í…ŒìŠ¤íŠ¸ ìˆœì„œ:**
1. ì•± ì¬ì‹œì‘ â†’ MainScreen ì§„ì…
2. **BottomSheet í‘œì‹œ ì•ˆ ë¨** âœ…

**ì˜ˆìƒ ë¡œê·¸:**
```
ğŸ”„ [VERSION CHECK] Current: 1.0.2
ğŸ”„ [VERSION CHECK] Latest: 1.0.2
ğŸ”„ [VERSION CHECK] Update Available: false
ğŸ”„ [VERSION CHECK] Force Update: false
```

## ğŸ”§ Firestore ë²„ì „ ì •ë³´ ê´€ë¦¬

### **ë²„ì „ ì •ë³´ ì—…ë°ì´íŠ¸**

**ë°©ë²• 1: ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© (ê¶Œì¥)**
```bash
# scripts/setup_version_info.py í¸ì§‘
# version_data ìˆ˜ì • í›„ ì‹¤í–‰
python3 scripts/setup_version_info.py
```

**ë°©ë²• 2: Firebase Console**
1. Firebase Console ì ‘ì†
2. Firestore Database ì„ íƒ
3. `app_config` ì»¬ë ‰ì…˜ â†’ `version_info` ë¬¸ì„œ ì„ íƒ
4. í•„ë“œ ìˆ˜ì •:
   - `latest_version`: ìµœì‹  ë²„ì „ ë²ˆí˜¸
   - `minimum_version`: ìµœì†Œ ì§€ì› ë²„ì „
   - `update_message`: ì—…ë°ì´íŠ¸ ì•ˆë‚´ ë©”ì‹œì§€
   - `force_update`: ê°•ì œ ì—…ë°ì´íŠ¸ ì—¬ë¶€

### **ë²„ì „ ê´€ë¦¬ Best Practices**

**1. ë²„ì „ ë²ˆí˜¸ ê·œì¹™ (Semantic Versioning)**
- `MAJOR.MINOR.PATCH+BUILD`
- ì˜ˆ: `1.0.2+13`
  - MAJOR (1): ì£¼ìš” ë³€ê²½
  - MINOR (0): ìƒˆ ê¸°ëŠ¥ ì¶”ê°€
  - PATCH (2): ë²„ê·¸ ìˆ˜ì •
  - BUILD (13): ë¹Œë“œ ë²ˆí˜¸

**2. latest_version ì—…ë°ì´íŠ¸ ì‹œì **
- ìƒˆ ë²„ì „ APKë¥¼ Play Storeì— ì—…ë¡œë“œí•œ í›„
- ì‚¬ìš©ìê°€ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ìƒíƒœì¼ ë•Œ

**3. minimum_version ì„¤ì •**
- ì‹¬ê°í•œ ë²„ê·¸ ìˆ˜ì • ì‹œ
- ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì‹œ
- API ë³€ê²½ìœ¼ë¡œ ì´ì „ ë²„ì „ í˜¸í™˜ ë¶ˆê°€ ì‹œ

**4. force_update ì‚¬ìš© ì‹œì **
- ì‹¬ê°í•œ ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬ ì‹œ
- ì„œë²„ API ë²„ì „ ë³€ê²½ìœ¼ë¡œ ì´ì „ í´ë¼ì´ì–¸íŠ¸ ë™ì‘ ë¶ˆê°€ ì‹œ
- ë°ì´í„° ì†ì‹¤ ìœ„í—˜ì´ ìˆëŠ” ë²„ê·¸ ìˆ˜ì • ì‹œ

## ğŸ“± ì•± ë²„ì „ ë³€ê²½ ë°©ë²•

### **í…ŒìŠ¤íŠ¸ìš© ë²„ì „ ë‹¤ìš´ê·¸ë ˆì´ë“œ**
```yaml
# pubspec.yaml
version: 1.0.1+13  # 1.0.2 â†’ 1.0.1
```

### **í”„ë¡œë•ì…˜ ë²„ì „ ì—…ê·¸ë ˆì´ë“œ**
```yaml
# pubspec.yaml
version: 1.0.2+13  # 1.0.1 â†’ 1.0.2
```

**ë³€ê²½ í›„:**
```bash
# APK ë¹Œë“œ (ë²„ì „ì´ ìë™ìœ¼ë¡œ ë°˜ì˜ë¨)
flutter build apk --release
```

## ğŸ” ë””ë²„ê¹…

### **ë²„ì „ ì²´í¬ ë¡œê·¸ í™•ì¸**
```dart
// MainScreen._checkAppVersion()ì—ì„œ ìë™ ì¶œë ¥
ğŸ”„ [VERSION CHECK] Current: 1.0.1
ğŸ”„ [VERSION CHECK] Latest: 1.0.2
ğŸ”„ [VERSION CHECK] Update Available: true
ğŸ”„ [VERSION CHECK] Force Update: false
```

### **Firestore ë°ì´í„° í™•ì¸**
```bash
# Firebase Console
# Firestore Database > app_config > version_info
```

### **SharedPreferences í™•ì¸**
```dart
// ì˜¤ëŠ˜ í•˜ë£¨ ë³´ì§€ ì•Šê¸° ì €ì¥ í‚¤
version_update_dismissed_date: "2025-12-05"
```

## ğŸ¯ í”„ë¡œë•ì…˜ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **pubspec.yaml ë²„ì „ì„ 1.0.2ë¡œ ë³µì›**
  ```yaml
  version: 1.0.2+14  # Build ë²ˆí˜¸ ì¦ê°€
  ```

- [ ] **Firestore version_info í™•ì¸**
  ```json
  {
    "latest_version": "1.0.2",
    "minimum_version": "1.0.0",
    "update_message": "ì‹¤ì œ ì—…ë°ì´íŠ¸ ë‚´ìš©",
    "force_update": false
  }
  ```

- [ ] **Play Store URL í™•ì¸**
  ```dart
  downloadUrl: 'https://play.google.com/store/apps/details?id=com.olssoo.makecall_app'
  ```

- [ ] **APK ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸**
  ```bash
  flutter build apk --release
  ```

- [ ] **Play Store ì—…ë¡œë“œ í›„ version_info ì—…ë°ì´íŠ¸**

## ğŸ“š ì¶”ê°€ ì°¸ê³  ìë£Œ

- **BottomSheet ìœ„ì ¯**: `lib/widgets/version_update_bottom_sheet.dart`
- **ì‚¬ìš© ê°€ì´ë“œ**: `lib/widgets/version_update_bottom_sheet_example.md`
- **ë²„ì „ ì²´í¬ ì„œë¹„ìŠ¤**: `lib/services/version_check_service.dart`
- **Firestore ì„¤ì • ìŠ¤í¬ë¦½íŠ¸**: `scripts/setup_version_info.py`

## ğŸ‰ ì™„ë£Œ!

ë²„ì „ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ì´ ì™„ì „íˆ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤!

í˜„ì¬ **ì•± ë²„ì „ 1.0.1**ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìœ¼ë©°,  
í”„ë¡œë•ì…˜ ë°°í¬ ì „ **1.0.2ë¡œ ë³µì›**í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

---

**Git Commit**: `22a2e57`  
**Repository**: https://github.com/ringneck/makecall
