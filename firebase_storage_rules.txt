================================================================================
Firebase Storage 보안 규칙
================================================================================

📦 프로젝트 ID: makecallio
🔗 Firebase Console: https://console.firebase.google.com/project/makecallio/storage/rules

================================================================================
복사할 보안 규칙 (아래 전체 내용을 복사하세요)
================================================================================

rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // 프로필 이미지: 인증된 사용자만 자신의 이미지 업로드/삭제 가능
    match /profile_images/{userId}.jpg {
      allow read: if true;  // 모든 사용자가 프로필 이미지 조회 가능
      allow write: if request.auth != null && request.auth.uid == userId;  // 본인만 업로드/삭제 가능
      allow delete: if request.auth != null && request.auth.uid == userId;  // 본인만 삭제 가능
    }
    
    // 기타 파일: 인증된 사용자만 접근 가능
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}

================================================================================
설정 방법
================================================================================

1단계: Firebase Console 접속
   makecallio/storage/rules

2단계: 위의 보안 규칙 복사
   - 위의 'rules_version'부터 마지막 '}}'까지 전체 복사

3단계: Firebase Console에 붙여넣기
   - Storage → Rules 탭으로 이동
   - 기존 규칙을 모두 삭제하고 복사한 규칙 붙여넣기

4단계: '게시' 버튼 클릭
   - 변경사항 저장 및 적용

================================================================================
보안 규칙 설명
================================================================================

✅ 프로필 이미지 (profile_images/{userId}.jpg):
   - 모든 사용자가 조회 가능 (read: if true)
   - 인증된 사용자가 자신의 이미지만 업로드/삭제 가능
   - request.auth.uid == userId 조건으로 본인 확인

✅ 기타 파일 (/{allPaths=**}):
   - 인증된 사용자만 읽기/쓰기 가능
   - request.auth != null 조건

